<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>BusTrips List</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body class="container mt-4">

<h2 class="mb-3">Bus Trips</h2>

<!-- ADD NEW BUS TRIP BUTTON -->
<div class="mb-3">
    <a th:href="@{/busTrips/new}" class="btn btn-primary">
        Add New BusTrip
    </a>
</div>

<!-- BUS TRIP TABLE -->
<table class="table table-striped table-bordered">
    <thead class="table-dark">
    <tr>
        <th>ID</th>
        <th>Route</th>
        <th>Bus</th>
        <th>Start Time</th>
        <th>Status</th>
        <th>Actions</th>
    </tr>
    </thead>

    <tbody>

    <tr th:each="bt : ${busTrips}">

        <!-- ID -->
        <td th:text="${bt.id}"></td>

        <!-- ROUTE -->
        <td th:text="${bt.route.origin.name + ' â†’ ' + bt.route.destination.name}"></td>

        <!-- BUS -->
        <td th:text="${bt.bus.registrationNumber}"></td>

        <!-- START TIME -->
        <td th:text="${#temporals.format(bt.startTime, 'yyyy-MM-dd HH:mm')}"></td>

        <!-- STATUS -->
        <td th:text="${bt.status}"></td>

        <!-- ACTIONS -->
        <td class="d-flex gap-2">

            <!-- VIEW DETAILS -->
            <a th:href="@{'/busTrips/' + ${bt.id} + '/details'}"
               class="btn btn-info btn-sm text-white">
                Details
            </a>

            <!-- EDIT -->
            <a th:href="@{'/busTrips/' + ${bt.id} + '/edit'}"
               class="btn btn-warning btn-sm">
                Edit
            </a>

            <!-- DELETE -->
            <form th:action="@{'/busTrips/' + ${bt.id} + '/delete'}"
                  method="post" class="m-0 p-0">
                <button type="submit" class="btn btn-danger btn-sm">
                    Delete
                </button>
            </form>

        </td>

    </tr>

    <!-- If no bus trips -->
    <tr th:if="${#lists.isEmpty(busTrips)}">
        <td colspan="6" class="text-center text-muted">No bus trips found.</td>
    </tr>

    </tbody>
</table>

</body>
</html>
