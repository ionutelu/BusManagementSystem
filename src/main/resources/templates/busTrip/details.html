<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Bus Trip Details</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body class="container mt-4">

<h2 class="mb-3">
    Bus Trip Details
    <span class="text-muted" th:text="'(#' + ${busTrip.id} + ')'"></span>
</h2>

<!-- GENERAL INFORMATION CARD -->
<div class="card mb-4 shadow-sm">
    <div class="card-header bg-primary text-white">
        General Information
    </div>
    <div class="card-body">
        <p><strong>Route:</strong>
            <span th:text="${busTrip.route.origin.name}"></span> â†’
            <span th:text="${busTrip.route.destination.name}"></span>
        </p>

        <p><strong>Bus:</strong>
            <span th:text="${busTrip.bus.registrationNumber}"></span>
        </p>

        <p><strong>Start Time:</strong>
            <span th:text="${#temporals.format(busTrip.startTime, 'yyyy-MM-dd HH:mm')}"></span>
        </p>

        <p><strong>Status:</strong>
            <span class="badge bg-info text-dark" th:text="${busTrip.status}"></span>
        </p>
    </div>
</div>

<!-- TICKETS SECTION -->
<h4 class="mb-2">ğŸ« Tickets Sold
    <span class="text-muted" th:text="'(' + ${tickets.size()} + ')'"></span>
</h4>

<div th:if="${#lists.isEmpty(tickets)}" class="alert alert-secondary">
    No tickets have been sold for this trip yet.
</div>

<div th:unless="${#lists.isEmpty(tickets)}">
    <table class="table table-striped table-bordered mb-4">
        <thead class="table-dark">
        <tr>
            <th>Ticket ID</th>
            <th>Passenger Name</th>
            <th>Seat Number</th>
            <th>Price</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="ticket : ${tickets}">
            <td th:text="${ticket.id}"></td>
            <td th:text="${ticket.passenger.name}"></td>
            <td th:text="${ticket.seatNumber}"></td>
            <td th:text="${ticket.price}"></td>
        </tr>
        </tbody>
    </table>
</div>

<!-- DUTY ASSIGNMENTS -->
<h4 class="mb-2">ğŸ‘· Duty Assignments
    <span class="text-muted" th:text="'(' + ${assignments.size()} + ')'"></span>
</h4>

<div th:if="${#lists.isEmpty(assignments)}" class="alert alert-secondary">
    No duty assignments have been created for this trip yet.
</div>

<div th:unless="${#lists.isEmpty(assignments)}">
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
        <tr>
            <th>Assignment ID</th>
            <th>Employee Name</th>
            <th>Role</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="assignment : ${assignments}">
            <td th:text="${assignment.id}"></td>
            <td th:text="${assignment.staff.name}"></td>
            <td th:text="${assignment.role}"></td>
        </tr>
        </tbody>
    </table>
</div>

<!-- BACK BUTTON -->
<div class="mt-3">
    <a href="/busTrips" class="btn btn-secondary">â† Back to BusTrip List</a>

    <a th:href="@{'/busTrips/' + ${busTrip.id} + '/addStation'}"
       class="btn btn-success">Add Station</a>

</div>

</body>
</html>
