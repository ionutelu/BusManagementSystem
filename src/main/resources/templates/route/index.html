<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Routes List</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body class="container mt-4">

<h2 class="mb-3">Routes</h2>

<!-- ADD NEW ROUTE BUTTON -->
<div class="mb-3">
    <a th:href="@{/routes/new}" class="btn btn-primary">
        Add New Route
    </a>
</div>

<!-- ROUTES TABLE -->
<table class="table table-striped table-bordered">
    <thead class="table-dark">
    <tr>
        <th>ID</th>
        <th>Origin</th>
        <th>Destination</th>
        <th>Distance (km)</th>
        <th>Actions</th>
    </tr>
    </thead>

    <tbody>
    <tr th:each="route : ${routes}">
        <td th:text="${route.id}"></td>
        <td th:text="${route.origin != null ? route.origin.name : 'N/A'}"></td>
        <td th:text="${route.destination != null ? route.destination.name : 'N/A'}"></td>
        <td th:text="${route.distance}"></td>

        <td class="d-flex gap-2">

            <!-- VIEW TRIPS -->
            <a th:href="@{'/routes/' + ${route.id} + '/trips'}"
               class="btn btn-info btn-sm text-white">
                View Trips
            </a>

            <!-- EDIT -->
            <a th:href="@{'/routes/' + ${route.id} + '/edit'}"
               class="btn btn-warning btn-sm">
                Edit
            </a>

            <!-- DELETE -->
            <form th:action="@{'/routes/' + ${route.id} + '/delete'}"
                  method="post" class="m-0 p-0">
                <button type="submit" class="btn btn-danger btn-sm">
                    Delete
                </button>
            </form>

        </td>
    </tr>

    <!-- If no routes -->
    <tr th:if="${#lists.isEmpty(routes)}">
        <td colspan="5" class="text-center text-muted">No routes found.</td>
    </tr>
    </tbody>
</table>

</body>
</html>
